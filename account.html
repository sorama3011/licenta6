<!doctype html>
<html lang="ro">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contul Meu - Gusturi Românești</title>
    <meta name="description" content="Gestionează contul tău Gusturi Românești. Vezi comenzile, actualizează datele personale și accesează ofertele exclusive.">
    
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="assistant-bot.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                🇷🇴 Gusturi Românești
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Acasă</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Produse</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="offers.html">Oferte</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">Despre Noi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">
                            <i class="bi bi-person"></i> Cont
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link position-relative" href="cart.html">
                            <i class="bi bi-basket"></i> Coș
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning text-dark" id="cart-count">0</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="bg-primary text-white py-4" style="margin-top: 76px;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="h3 mb-1">
                        <i class="bi bi-person-circle me-2"></i>
                        Bun venit, <span id="userName">Maria</span>!
                    </h1>
                    <p class="mb-0 opacity-75">Gestionează contul tău și vezi comenzile recente</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="d-flex align-items-center justify-content-md-end">
                        <div class="me-3">
                            <small class="d-block opacity-75">Puncte de fidelitate</small>
                            <span class="h5 mb-0" id="loyaltyPoints">320</span>
                        </div>
                        <button class="btn btn-outline-light btn-sm" onclick="logout()">
                            <i class="bi bi-box-arrow-right me-1"></i>Deconectare
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Account Dashboard -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Sidebar Navigation -->
                <div class="col-lg-3 mb-4">
                    <div class="card shadow-sm">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">
                                <i class="bi bi-grid me-2"></i>Contul Meu
                            </h5>
                        </div>
                        <div class="list-group list-group-flush">
                            <a href="#dashboard" class="list-group-item list-group-item-action active" data-section="dashboard">
                                <i class="bi bi-speedometer2 me-2"></i>Panou Principal
                            </a>
                            <a href="#profile" class="list-group-item list-group-item-action" data-section="profile">
                                <i class="bi bi-person me-2"></i>Datele Mele
                            </a>
                            <a href="#order-history" class="list-group-item list-group-item-action" data-section="order-history">
                                <i class="bi bi-clock-history me-2"></i>Istoric Comenzi
                            </a>
                            <a href="#wishlist" class="list-group-item list-group-item-action" data-section="wishlist">
                                <i class="bi bi-heart me-2"></i>Lista de Dorințe
                            </a>
                            <a href="#addresses" class="list-group-item list-group-item-action" data-section="addresses">
                                <i class="bi bi-geo-alt me-2"></i>Adresele Mele
                            </a>
                            <a href="#loyalty" class="list-group-item list-group-item-action" data-section="loyalty">
                                <i class="bi bi-award me-2"></i>Puncte de Fidelitate
                            </a>
                            <a href="#vouchers" class="list-group-item list-group-item-action" data-section="vouchers">
                                <i class="bi bi-ticket-perforated me-2"></i>Vouchere Disponibile
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-9">
                    <!-- Dashboard Section -->
                    <div id="dashboard-section" class="account-section">
                        <div class="row g-4 mb-4">
                            <!-- Quick Stats -->
                            <div class="col-md-3">
                                <div class="card text-center h-100 border-primary">
                                    <div class="card-body">
                                        <i class="bi bi-bag-check text-primary" style="font-size: 2rem;"></i>
                                        <h4 class="mt-2 mb-1" id="totalOrders">12</h4>
                                        <small class="text-muted">Comenzi Totale</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center h-100 border-success">
                                    <div class="card-body">
                                        <i class="bi bi-currency-exchange text-success" style="font-size: 2rem;"></i>
                                        <h4 class="mt-2 mb-1" id="totalSpent">1,247 RON</h4>
                                        <small class="text-muted">Total Cheltuit</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center h-100 border-warning">
                                    <div class="card-body">
                                        <i class="bi bi-award text-warning" style="font-size: 2rem;"></i>
                                        <h4 class="mt-2 mb-1" id="loyaltyPointsDisplay">320</h4>
                                        <small class="text-muted">Puncte Fidelitate</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card text-center h-100 border-danger">
                                    <div class="card-body">
                                        <i class="bi bi-heart text-danger" style="font-size: 2rem;"></i>
                                        <h4 class="mt-2 mb-1" id="favoriteProducts">8</h4>
                                        <small class="text-muted">Produse Favorite</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Orders -->
                        <div class="card shadow-sm mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Comenzi Recente</h5>
                                <a href="#order-history" class="btn btn-outline-primary btn-sm" data-section="order-history">
                                    Vezi toate
                                </a>
                            </div>
                            <div class="card-body">
                                <div id="recentOrders">
                                    <!-- Recent orders will be loaded here -->
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">Acțiuni Rapide</h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <a href="products.html" class="btn btn-outline-primary w-100">
                                            <i class="bi bi-basket me-2"></i>Cumpără Produse
                                        </a>
                                    </div>
                                    <div class="col-md-4">
                                        <a href="#wishlist" class="btn btn-outline-secondary w-100" data-section="wishlist">
                                            <i class="bi bi-heart me-2"></i>Lista de Dorințe
                                        </a>
                                    </div>
                                    <div class="col-md-4">
                                        <a href="contact.html" class="btn btn-outline-info w-100">
                                            <i class="bi bi-envelope me-2"></i>Contactează-ne
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Section -->
                    <div id="profile-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="bi bi-person me-2"></i>Datele Mele
                                </h5>
                            </div>
                            <div class="card-body">
                                <form id="profileForm">
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="firstName" class="form-label">Prenume</label>
                                            <input type="text" class="form-control" id="firstName" value="Maria">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="lastName" class="form-label">Nume</label>
                                            <input type="text" class="form-control" id="lastName" value="Popescu">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="email" value="maria.popescu@email.com">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="phone" class="form-label">Telefon</label>
                                            <input type="tel" class="form-control" id="phone" value="+40 721 234 567">
                                        </div>
                                        <div class="col-12">
                                            <label for="birthDate" class="form-label">Data nașterii</label>
                                            <input type="date" class="form-control" id="birthDate" value="1985-03-15">
                                        </div>
                                        <div class="col-12">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="newsletter" checked>
                                                <label class="form-check-label" for="newsletter">
                                                    Vreau să primesc oferte și noutăți pe email
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-check-circle me-2"></i>Salvează Modificările
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Order History Section -->
                    <div id="order-history-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="bi bi-clock-history me-2"></i>Istoric Comenzi
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="orderHistory">
                                    <!-- Order history will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Wishlist Section -->
                    <div id="wishlist-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="bi bi-heart me-2"></i>Lista de Dorințe
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="wishlistItems">
                                    <!-- Wishlist items will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Addresses Section -->
                    <div id="addresses-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="bi bi-geo-alt me-2"></i>Adresele Mele
                                </h5>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addAddressModal">
                                    <i class="bi bi-plus me-1"></i>Adaugă Adresă
                                </button>
                            </div>
                            <div class="card-body">
                                <div id="addressList">
                                    <!-- Addresses will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loyalty Points Section -->
                    <div id="loyalty-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="bi bi-award me-2"></i>Puncte de Fidelitate
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row g-4">
                                    <div class="col-md-6">
                                        <div class="text-center p-4 bg-light rounded">
                                            <i class="bi bi-award text-warning" style="font-size: 3rem;"></i>
                                            <h3 class="mt-2 mb-1" id="currentPoints">320</h3>
                                            <p class="text-muted mb-0">Puncte Disponibile</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Cum să folosești punctele:</h6>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                100 puncte = 5% reducere
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                200 puncte = 10% reducere
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                500 puncte = 20% reducere
                                            </li>
                                        </ul>
                                        <button class="btn btn-warning" onclick="showRedeemModal()">
                                            <i class="bi bi-gift me-2"></i>Folosește Punctele
                                        </button>
                                    </div>
                                </div>
                                
                                <hr>
                                
                                <h6>Istoric Puncte</h6>
                                <div id="pointsHistory">
                                    <!-- Points history will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vouchers Section -->
                    <div id="vouchers-section" class="account-section" style="display: none;">
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="bi bi-ticket-perforated me-2"></i>Vouchere Disponibile
                                </h5>
                            </div>
                            <div class="card-body">
                                <div id="vouchersList">
                                    <!-- Vouchers will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Address Modal -->
    <div class="modal fade" id="addAddressModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Adaugă Adresă Nouă</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addAddressForm">
                        <div class="mb-3">
                            <label for="addressName" class="form-label">Numele adresei</label>
                            <input type="text" class="form-control" id="addressName" placeholder="ex: Acasă, Birou">
                        </div>
                        <div class="mb-3">
                            <label for="fullName" class="form-label">Nume complet</label>
                            <input type="text" class="form-control" id="fullName">
                        </div>
                        <div class="mb-3">
                            <label for="street" class="form-label">Strada și numărul</label>
                            <input type="text" class="form-control" id="street">
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="city" class="form-label">Orașul</label>
                                <input type="text" class="form-control" id="city">
                            </div>
                            <div class="col-md-6">
                                <label for="county" class="form-label">Județul</label>
                                <input type="text" class="form-control" id="county">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="postalCode" class="form-label">Cod poștal</label>
                            <input type="text" class="form-control" id="postalCode">
                        </div>
                        <div class="mb-3">
                            <label for="phoneAddress" class="form-label">Telefon</label>
                            <input type="tel" class="form-control" id="phoneAddress">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anulează</button>
                    <button type="button" class="btn btn-primary" onclick="saveAddress()">Salvează Adresa</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Redeem Points Modal -->
    <div class="modal fade" id="redeemPointsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-gift me-2"></i>Folosește Punctele de Fidelitate
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="bi bi-award text-warning" style="font-size: 3rem;"></i>
                        <h4 class="mt-2">Puncte disponibile: <span id="modalCurrentPoints">320</span></h4>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="card voucher-option" data-points="100" data-discount="5">
                                <div class="card-body text-center">
                                    <h5 class="text-primary">5% Reducere</h5>
                                    <p class="mb-2">100 puncte</p>
                                    <button class="btn btn-outline-primary btn-sm" onclick="generateVoucher(100, 5)">
                                        Generează
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card voucher-option" data-points="200" data-discount="10">
                                <div class="card-body text-center">
                                    <h5 class="text-success">10% Reducere</h5>
                                    <p class="mb-2">200 puncte</p>
                                    <button class="btn btn-outline-success btn-sm" onclick="generateVoucher(200, 10)">
                                        Generează
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card voucher-option" data-points="500" data-discount="20">
                                <div class="card-body text-center">
                                    <h5 class="text-warning">20% Reducere</h5>
                                    <p class="mb-2">500 puncte</p>
                                    <button class="btn btn-outline-warning btn-sm" onclick="generateVoucher(500, 20)">
                                        Generează
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <i class="bi bi-info-circle me-2"></i>
                        <strong>Notă:</strong> Voucherele generate sunt valabile 7 zile de la data generării și pot fi folosite o singură dată.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5>Gusturi Românești</h5>
                    <p>Cea mai mare platformă online de produse tradiționale românești.</p>
                    <div class="social-links">
                        <a href="#" class="text-light me-3"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="text-light me-3"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="text-light me-3"><i class="bi bi-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2">
                    <h6>Navigare</h6>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-light text-decoration-none">Acasă</a></li>
                        <li><a href="products.html" class="text-light text-decoration-none">Produse</a></li>
                        <li><a href="offers.html" class="text-light text-decoration-none">Oferte</a></li>
                        <li><a href="about.html" class="text-light text-decoration-none">Despre Noi</a></li>
                        <li><a href="contact.html" class="text-light text-decoration-none">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-2">
                    <h6>Cont</h6>
                    <ul class="list-unstyled">
                        <li><a href="login.html" class="text-light text-decoration-none">Autentificare</a></li>
                        <li><a href="cart.html" class="text-light text-decoration-none">Coșul Meu</a></li>
                    </ul>
                </div>
                <div class="col-lg-2">
                    <h6>Informații</h6>
                    <ul class="list-unstyled">
                        <li><a href="privacy.html" class="text-light text-decoration-none">Politica de Confidențialitate</a></li>
                        <li><a href="terms.html" class="text-light text-decoration-none">Termeni și Condiții</a></li>
                    </ul>
                </div>
                <div class="col-lg-2">
                    <h6>Contact</h6>
                    <p class="small mb-1">📍 București, România</p>
                    <p class="small mb-1">📞 +40 721 234 567</p>
                    <p class="small">✉️ contact@gusturi-romanesti.ro</p>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p class="mb-0">&copy; 2024 Gusturi Românești. Toate drepturile rezervate.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="main.js"></script>
    <script src="assistant-bot.js"></script>
    <script>
        // Account page functionality
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            setupSectionNavigation();
            loadRecentOrders();
            loadOrderHistory();
            loadWishlist();
            loadAddresses();
            loadPointsHistory();
            loadVouchers();
            
            // Handle hash navigation
            if (window.location.hash) {
                const section = window.location.hash.substring(1);
                showSection(section);
            }
        });

        function loadUserData() {
            const userData = getUserData();
            if (userData.loggedIn) {
                document.getElementById('userName').textContent = userData.name || 'Utilizator';
                document.getElementById('loyaltyPoints').textContent = userData.points || '0';
                document.getElementById('totalOrders').textContent = userData.totalOrders || '0';
                document.getElementById('totalSpent').textContent = (userData.totalSpent || 0) + ' RON';
                document.getElementById('loyaltyPointsDisplay').textContent = userData.points || '0';
                document.getElementById('favoriteProducts').textContent = userData.favoriteProducts || '0';
                document.getElementById('currentPoints').textContent = userData.points || '0';
                document.getElementById('modalCurrentPoints').textContent = userData.points || '0';
                
                // Update profile form
                if (userData.email) {
                    document.getElementById('email').value = userData.email;
                }
            }
        }

        function setupSectionNavigation() {
            const sectionLinks = document.querySelectorAll('[data-section]');
            sectionLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    showSection(section);
                    
                    // Update URL hash
                    window.history.pushState(null, null, '#' + section);
                });
            });
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.account-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
            }
            
            // Update navigation
            document.querySelectorAll('[data-section]').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll(`[data-section="${sectionName}"]`).forEach(link => {
                link.classList.add('active');
            });
        }

        function loadRecentOrders() {
            const recentOrders = [
                {
                    id: 'GR-2024-001',
                    date: '2024-01-15',
                    status: 'Livrată',
                    total: 89.50,
                    items: 3
                },
                {
                    id: 'GR-2024-002',
                    date: '2024-01-10',
                    status: 'În procesare',
                    total: 156.99,
                    items: 5
                }
            ];

            const container = document.getElementById('recentOrders');
            container.innerHTML = recentOrders.map(order => `
                <div class="border rounded p-3 mb-3">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <strong>Comanda #${order.id}</strong>
                            <br><small class="text-muted">${formatDate(order.date)}</small>
                        </div>
                        <div class="col-md-3">
                            <span class="badge ${getStatusBadgeClass(order.status)}">${order.status}</span>
                        </div>
                        <div class="col-md-3">
                            <strong>${order.total.toFixed(2)} RON</strong>
                            <br><small class="text-muted">${order.items} produse</small>
                        </div>
                        <div class="col-md-3 text-end">
                            <button class="btn btn-outline-primary btn-sm">Vezi Detalii</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadOrderHistory() {
            const orders = [
                {
                    id: 'GR-2024-001',
                    date: '2024-01-15',
                    status: 'Livrată',
                    total: 89.50,
                    items: [
                        { name: 'Dulceață de Căpșuni', quantity: 2, price: 18.99 },
                        { name: 'Zacuscă de Buzău', quantity: 1, price: 15.50 },
                        { name: 'Miere de Salcâm', quantity: 1, price: 28.50 }
                    ]
                },
                {
                    id: 'GR-2024-002',
                    date: '2024-01-10',
                    status: 'În procesare',
                    total: 156.99,
                    items: [
                        { name: 'Brânză de Burduf', quantity: 1, price: 32.00 },
                        { name: 'Țuică de Prune', quantity: 1, price: 45.00 },
                        { name: 'Cârnați de Pleșcoi', quantity: 2, price: 24.99 }
                    ]
                }
            ];

            const container = document.getElementById('orderHistory');
            container.innerHTML = orders.map(order => `
                <div class="card mb-3">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <div>
                            <strong>Comanda #${order.id}</strong>
                            <span class="badge ${getStatusBadgeClass(order.status)} ms-2">${order.status}</span>
                        </div>
                        <div>
                            <small class="text-muted">${formatDate(order.date)}</small>
                        </div>
                    </div>
                    <div class="card-body">
                        ${order.items.map(item => `
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div>
                                    <strong>${item.name}</strong>
                                    <small class="text-muted"> x${item.quantity}</small>
                                </div>
                                <div>${(item.price * item.quantity).toFixed(2)} RON</div>
                            </div>
                        `).join('')}
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <strong>Total: ${order.total.toFixed(2)} RON</strong>
                            <div>
                                <button class="btn btn-outline-primary btn-sm me-2">Vezi Detalii</button>
                                <button class="btn btn-primary btn-sm">Comandă Din Nou</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadWishlist() {
            const wishlistItems = [
                {
                    id: 5,
                    name: 'Miere de Salcâm',
                    price: 28.50,
                    image: 'https://via.placeholder.com/100x80/8B0000/FFFFFF?text=Miere+Salcam',
                    region: 'Transilvania'
                },
                {
                    id: 14,
                    name: 'Dulceață de Trandafiri',
                    price: 42.50,
                    image: 'https://via.placeholder.com/100x80/8B0000/FFFFFF?text=Dulceata+Trandafiri',
                    region: 'Dobrogea'
                }
            ];

            const container = document.getElementById('wishlistItems');
            if (wishlistItems.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-heart text-muted" style="font-size: 4rem;"></i>
                        <h4 class="mt-3">Lista de dorințe este goală</h4>
                        <p class="text-muted">Adaugă produse la lista de dorințe pentru a le găsi mai ușor mai târziu.</p>
                        <a href="products.html" class="btn btn-primary">Explorează Produsele</a>
                    </div>
                `;
            } else {
                container.innerHTML = wishlistItems.map(item => `
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-2">
                                    <img src="${item.image}" alt="${item.name}" class="img-fluid rounded">
                                </div>
                                <div class="col-md-6">
                                    <h6 class="mb-1">${item.name}</h6>
                                    <small class="text-muted">Produs local din ${item.region}</small>
                                </div>
                                <div class="col-md-2">
                                    <strong>${item.price.toFixed(2)} RON</strong>
                                </div>
                                <div class="col-md-2 text-end">
                                    <button class="btn btn-primary btn-sm mb-1" onclick="addToCart(${item.id}, '${item.name}', ${item.price}, '${item.image}', '500g')">
                                        <i class="bi bi-basket"></i>
                                    </button>
                                    <button class="btn btn-outline-danger btn-sm" onclick="removeFromWishlist(${item.id})">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        function loadAddresses() {
            const addresses = [
                {
                    id: 1,
                    name: 'Acasă',
                    fullName: 'Maria Popescu',
                    street: 'Strada Florilor Nr. 25, Ap. 4',
                    city: 'București',
                    county: 'București',
                    postalCode: '010101',
                    phone: '+40 721 234 567',
                    isDefault: true
                }
            ];

            const container = document.getElementById('addressList');
            container.innerHTML = addresses.map(address => `
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="mb-1">
                                    ${address.name}
                                    ${address.isDefault ? '<span class="badge bg-primary ms-2">Implicită</span>' : ''}
                                </h6>
                                <p class="mb-1"><strong>${address.fullName}</strong></p>
                                <p class="mb-1">${address.street}</p>
                                <p class="mb-1">${address.city}, ${address.county} ${address.postalCode}</p>
                                <p class="mb-0 text-muted">${address.phone}</p>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    Acțiuni
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="editAddress(${address.id})">Editează</a></li>
                                    ${!address.isDefault ? '<li><a class="dropdown-item" href="#" onclick="setDefaultAddress(' + address.id + ')">Setează ca implicită</a></li>' : ''}
                                    ${!address.isDefault ? '<li><a class="dropdown-item text-danger" href="#" onclick="deleteAddress(' + address.id + ')">Șterge</a></li>' : ''}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadPointsHistory() {
            const pointsHistory = [
                { date: '2024-01-15', description: 'Comandă #GR-2024-001', points: +45, type: 'earned' },
                { date: '2024-01-10', description: 'Reducere aplicată', points: -100, type: 'used' },
                { date: '2024-01-05', description: 'Comandă #GR-2024-002', points: +78, type: 'earned' },
                { date: '2024-01-01', description: 'Bonus Anul Nou', points: +50, type: 'bonus' }
            ];

            const container = document.getElementById('pointsHistory');
            container.innerHTML = pointsHistory.map(entry => `
                <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                    <div>
                        <div class="fw-medium">${entry.description}</div>
                        <small class="text-muted">${formatDate(entry.date)}</small>
                    </div>
                    <div class="text-end">
                        <span class="fw-bold ${entry.points > 0 ? 'text-success' : 'text-danger'}">
                            ${entry.points > 0 ? '+' : ''}${entry.points} puncte
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // Voucher Management Functions
        function loadVouchers() {
            const vouchers = getVouchers();
            const container = document.getElementById('vouchersList');
            
            if (vouchers.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-ticket-perforated text-muted" style="font-size: 4rem;"></i>
                        <h4 class="mt-3">Nu ai vouchere generate</h4>
                        <p class="text-muted">Folosește punctele de fidelitate pentru a genera vouchere de reducere.</p>
                        <button class="btn btn-primary" onclick="showRedeemModal()">
                            <i class="bi bi-gift me-2"></i>Generează Voucher
                        </button>
                    </div>
                `;
            } else {
                container.innerHTML = vouchers.map(voucher => {
                    const isExpired = new Date(voucher.expirationDate) < new Date();
                    const statusClass = isExpired ? 'bg-danger' : 'bg-success';
                    const statusText = isExpired ? 'Expirat' : 'Valid';
                    
                    return `
                        <div class="card mb-3 ${isExpired ? 'opacity-75' : ''}">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-md-3">
                                        <div class="voucher-code">
                                            <h5 class="mb-1 font-monospace">${voucher.code}</h5>
                                            <small class="text-muted">Cod voucher</small>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="text-center">
                                            <h4 class="text-primary mb-1">${voucher.discount}%</h4>
                                            <small class="text-muted">Reducere</small>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div>
                                            <strong>Expiră la:</strong><br>
                                            <small class="text-muted">${formatDate(voucher.expirationDate)}</small>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <span class="badge ${statusClass}">${statusText}</span>
                                    </div>
                                    <div class="col-md-2 text-end">
                                        ${!isExpired ? `
                                            <button class="btn btn-outline-primary btn-sm mb-1" onclick="copyVoucherCode('${voucher.code}')">
                                                <i class="bi bi-clipboard"></i> Copiază
                                            </button>
                                            <br>
                                            <a href="cart.html" class="btn btn-primary btn-sm">
                                                Folosește
                                            </a>
                                        ` : `
                                            <button class="btn btn-outline-secondary btn-sm" disabled>
                                                Expirat
                                            </button>
                                        `}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function getVouchers() {
            const userData = getUserData();
            const userEmail = userData.email || 'default';
            const vouchersKey = `vouchers_${userEmail}`;
            return JSON.parse(localStorage.getItem(vouchersKey) || '[]');
        }

        function saveVouchers(vouchers) {
            const userData = getUserData();
            const userEmail = userData.email || 'default';
            const vouchersKey = `vouchers_${userEmail}`;
            localStorage.setItem(vouchersKey, JSON.stringify(vouchers));
        }

        function generateVoucherCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = 'FID-';
            for (let i = 0; i < 5; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function generateVoucher(pointsRequired, discountPercent) {
            const userData = getUserData();
            const currentPoints = userData.points || 0;
            
            if (currentPoints < pointsRequired) {
                showNotification(`Nu ai suficiente puncte! Ai nevoie de ${pointsRequired} puncte.`, 'danger');
                return;
            }
            
            // Generate voucher
            const voucher = {
                code: generateVoucherCode(),
                discount: discountPercent,
                expirationDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days from now
                createdDate: new Date().toISOString(),
                used: false
            };
            
            // Save voucher
            const vouchers = getVouchers();
            vouchers.push(voucher);
            saveVouchers(vouchers);
            
            // Deduct points
            userData.points -= pointsRequired;
            localStorage.setItem('userData', JSON.stringify(userData));
            
            // Update UI
            loadUserData();
            loadVouchers();
            
            // Close modal and show success
            const modal = bootstrap.Modal.getInstance(document.getElementById('redeemPointsModal'));
            modal.hide();
            
            showNotification(`Voucher generat cu succes! Codul tău: ${voucher.code}`, 'success');
            
            // Show vouchers section
            showSection('vouchers');
        }

        function copyVoucherCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                showNotification(`Codul ${code} a fost copiat în clipboard!`, 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = code;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification(`Codul ${code} a fost copiat!`, 'success');
            });
        }

        // Helper functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ro-RO', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function getStatusBadgeClass(status) {
            switch (status) {
                case 'Livrată': return 'bg-success';
                case 'În procesare': return 'bg-warning text-dark';
                case 'În transport': return 'bg-info';
                case 'Anulată': return 'bg-danger';
                default: return 'bg-secondary';
            }
        }

        // Action functions
        function saveAddress() {
            // Simulate saving address
            showNotification('Adresa a fost salvată cu succes!', 'success');
            const modal = bootstrap.Modal.getInstance(document.getElementById('addAddressModal'));
            modal.hide();
            loadAddresses();
        }

        function removeFromWishlist(productId) {
            showNotification('Produsul a fost eliminat din lista de dorințe.', 'info');
            loadWishlist();
        }

        function editAddress(addressId) {
            showNotification('Funcționalitatea de editare va fi implementată.', 'info');
        }

        function setDefaultAddress(addressId) {
            showNotification('Adresa a fost setată ca implicită.', 'success');
            loadAddresses();
        }

        function deleteAddress(addressId) {
            if (confirm('Ești sigur că vrei să ștergi această adresă?')) {
                showNotification('Adresa a fost ștearsă.', 'info');
                loadAddresses();
            }
        }

        function showRedeemModal() {
            const modal = new bootstrap.Modal(document.getElementById('redeemPointsModal'));
            modal.show();
        }

        // Profile form submission
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showNotification('Datele au fost actualizate cu succes!', 'success');
        });
    </script>
</body>
</html>